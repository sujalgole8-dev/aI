<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Truth Verification Engine</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&family=Playfair+Display:ital,wght@1,400&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#020408;--s1:#070C15;--s2:#0B1220;--b1:#111E30;--b2:#1A2C42;
  --g:#00FFA3;--b:#4F7CFF;--r:#FF3355;--a:#FFB800;--c:#00D4FF;--p:#BF5FFF;
  --txt:#C8DFF5;--dim:#3A5470;--lo:#7A9AB8;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--txt);font-family:'DM Sans',sans-serif;font-weight:300;min-height:100vh;overflow-x:hidden}

/* â”€â”€ CANVAS BACKGROUND â”€â”€ */
#bgCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}

/* â”€â”€ SCANLINE â”€â”€ */
.scanline{position:fixed;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(0,255,163,0.3),transparent);animation:scan 4s linear infinite;z-index:1;pointer-events:none}
@keyframes scan{0%{top:-2px;opacity:0}10%{opacity:1}90%{opacity:1}100%{top:100vh;opacity:0}}

/* â”€â”€ WRAPPER â”€â”€ */
.wrap{position:relative;z-index:2}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPLASH SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#splash{position:fixed;inset:0;z-index:1000;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem;transition:opacity .8s,transform .8s}
#splash.hide{opacity:0;pointer-events:none;transform:scale(1.05)}
.splash-hex{width:100px;height:100px;background:conic-gradient(var(--g),var(--b),var(--p),var(--g));clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);display:flex;align-items:center;justify-content:center;animation:hexSpin 3s linear infinite}
@keyframes hexSpin{0%{filter:hue-rotate(0deg) brightness(1)}50%{filter:hue-rotate(180deg) brightness(1.3)}100%{filter:hue-rotate(360deg) brightness(1)}}
.splash-inner{width:60px;height:60px;background:var(--bg);clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);display:flex;align-items:center;justify-content:center;font-size:1.8rem}
.splash-title{font-family:'Bebas Neue',sans-serif;font-size:2.5rem;letter-spacing:.2em;text-align:center;animation:pulse 1.5s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.splash-bar{width:260px;height:2px;background:var(--b1);overflow:hidden;border-radius:2px}
.splash-prog{height:100%;background:linear-gradient(90deg,var(--g),var(--b));width:0%;animation:loadBar 2.5s ease-out forwards}
@keyframes loadBar{0%{width:0%}100%{width:100%}}
.splash-sub{font-size:.7rem;letter-spacing:.2em;text-transform:uppercase;color:var(--dim)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
nav{display:flex;align-items:center;justify-content:space-between;padding:1.2rem 2.5rem;border-bottom:1px solid var(--b1);backdrop-filter:blur(16px);background:rgba(2,4,8,.9);position:sticky;top:0;z-index:100}
.nav-brand{display:flex;align-items:center;gap:.85rem}
.nav-hex{width:36px;height:36px;background:linear-gradient(135deg,var(--g),var(--b));clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);display:flex;align-items:center;justify-content:center;font-size:.9rem;animation:hexSpin 6s linear infinite}
.nav-name{font-family:'Bebas Neue',sans-serif;font-size:1.35rem;letter-spacing:.1em}
.nav-name em{color:var(--g);font-style:normal}
.nav-right{display:flex;align-items:center;gap:.8rem}
.nav-badge{font-size:.55rem;letter-spacing:.18em;text-transform:uppercase;color:var(--dim);border:1px solid var(--b2);padding:.28rem .7rem;display:flex;align-items:center;gap:.4rem}
.nav-badge::before{content:'';width:5px;height:5px;border-radius:50%;background:var(--g);animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1;box-shadow:0 0 4px var(--g)}50%{opacity:.2;box-shadow:none}}
.hackathon-tag{font-size:.55rem;letter-spacing:.12em;text-transform:uppercase;background:linear-gradient(135deg,var(--g),var(--b));color:#000;padding:.28rem .75rem;font-weight:500}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero{text-align:center;padding:4.5rem 2rem 3rem;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 70% 60% at 50% 0%,rgba(79,124,255,.08),transparent);pointer-events:none}
.hero-chip{display:inline-flex;align-items:center;gap:.5rem;font-size:.6rem;letter-spacing:.25em;text-transform:uppercase;color:var(--g);border:1px solid rgba(0,255,163,.25);background:rgba(0,255,163,.05);padding:.35rem .9rem;margin-bottom:1.8rem;animation:fadeUp .8s ease both}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
.hero-big{font-family:'Bebas Neue',sans-serif;font-size:clamp(4rem,10vw,9rem);letter-spacing:.03em;line-height:.88;animation:fadeUp .8s .1s ease both}
.hero-big .w1{background:linear-gradient(135deg,#fff 0%,#7090B0 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-big .w2{background:linear-gradient(135deg,var(--g) 0%,var(--b) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-italic{font-family:'Playfair Display',serif;font-style:italic;font-size:clamp(1.8rem,4.5vw,4rem);background:linear-gradient(135deg,var(--a),var(--r));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:block;margin-bottom:1.4rem;animation:fadeUp .8s .2s ease both}
.hero-desc{max-width:520px;margin:0 auto 2.5rem;font-size:.88rem;color:var(--lo);line-height:1.9;animation:fadeUp .8s .3s ease both}
.hero-stats{display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;margin-bottom:3.5rem;animation:fadeUp .8s .4s ease both}
.hstat{text-align:center}
.hstat-num{font-family:'Bebas Neue',sans-serif;font-size:2.2rem;letter-spacing:.05em;display:block}
.hstat-lbl{font-size:.6rem;color:var(--dim);text-transform:uppercase;letter-spacing:.1em}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODE SELECTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mode-wrap{max-width:700px;margin:0 auto 3rem;padding:0 2rem;animation:fadeUp .8s .5s ease both}
.mode-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}
.mode-card{background:var(--s1);border:1px solid var(--b1);padding:1.6rem 1rem;text-align:center;cursor:pointer;transition:all .3s;position:relative;overflow:hidden}
.mode-card::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(0,255,163,.07),rgba(79,124,255,.07));opacity:0;transition:opacity .3s}
.mode-card:hover::before,.mode-card.sel::before{opacity:1}
.mode-card:hover,.mode-card.sel{border-color:rgba(0,255,163,.4);transform:translateY(-3px);box-shadow:0 12px 40px rgba(0,255,163,.12)}
.mode-card.sel{background:rgba(0,255,163,.04)}
.mode-icon{font-size:2.4rem;display:block;margin-bottom:.8rem}
.mode-name{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:.15em;margin-bottom:.3rem}
.mode-desc{font-size:.62rem;color:var(--dim);line-height:1.6}
.mode-sel-dot{position:absolute;top:.6rem;right:.6rem;width:8px;height:8px;border-radius:50%;background:var(--g);opacity:0;transition:opacity .3s;box-shadow:0 0 8px var(--g)}
.mode-card.sel .mode-sel-dot{opacity:1}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UPLOAD ARENA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.upload-arena{max-width:800px;margin:0 auto;padding:0 2rem 5rem}

/* DROP ZONE */
.dropzone{position:relative;border:1px solid var(--b2);background:var(--s1);padding:4rem 2rem;text-align:center;cursor:pointer;transition:all .4s;overflow:hidden;animation:fadeUp .8s .6s ease both}
.dz-corner{position:absolute;width:24px;height:24px;opacity:0;transition:opacity .3s}
.dz-corner.tl{top:-1px;left:-1px;border-top:2px solid var(--g);border-left:2px solid var(--g)}
.dz-corner.tr{top:-1px;right:-1px;border-top:2px solid var(--g);border-right:2px solid var(--g)}
.dz-corner.bl{bottom:-1px;left:-1px;border-bottom:2px solid var(--g);border-left:2px solid var(--g)}
.dz-corner.br{bottom:-1px;right:-1px;border-bottom:2px solid var(--g);border-right:2px solid var(--g)}
.dropzone:hover .dz-corner,.dropzone.over .dz-corner{opacity:1}
.dropzone:hover,.dropzone.over{border-color:rgba(0,255,163,.4);background:rgba(0,255,163,.025);box-shadow:0 0 60px rgba(0,255,163,.08),inset 0 0 60px rgba(0,255,163,.02)}
.dz-glow{position:absolute;inset:0;background:radial-gradient(ellipse at center,rgba(0,255,163,.06),transparent 65%);opacity:0;transition:opacity .4s;pointer-events:none}
.dropzone:hover .dz-glow{opacity:1}

/* Orbital rings */
.orb{width:110px;height:110px;border-radius:50%;border:1px solid var(--b2);display:flex;align-items:center;justify-content:center;margin:0 auto 2rem;position:relative;transition:all .4s}
.orb::before{content:'';position:absolute;inset:-10px;border-radius:50%;border:1px dashed rgba(0,255,163,.15);animation:orb1 16s linear infinite}
.orb::after{content:'';position:absolute;inset:-22px;border-radius:50%;border:1px dashed rgba(79,124,255,.1);animation:orb1 24s linear infinite reverse}
@keyframes orb1{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
.dropzone:hover .orb{border-color:rgba(0,255,163,.5);box-shadow:0 0 30px rgba(0,255,163,.15)}
.orb-icon{font-size:2.8rem;transition:transform .3s}
.dropzone:hover .orb-icon{transform:scale(1.15)}

.dz-title{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:.1em;margin-bottom:.5rem}
.dz-sub{font-size:.73rem;color:var(--lo);margin-bottom:2rem;line-height:1.8}
.fmt-pills{display:flex;gap:.4rem;justify-content:center;flex-wrap:wrap;margin-bottom:2rem}
.fmt-pill{font-size:.54rem;padding:.18rem .5rem;border:1px solid var(--b2);color:var(--dim);letter-spacing:.1em;text-transform:uppercase;transition:all .3s}
.fmt-pill.active-fmt{border-color:var(--g);color:var(--g);background:rgba(0,255,163,.06)}
.upload-cta{display:inline-flex;align-items:center;gap:.6rem;background:linear-gradient(135deg,var(--b),var(--g));color:#000;border:none;font-family:'DM Sans',sans-serif;font-size:.75rem;font-weight:500;padding:.85rem 2.2rem;cursor:pointer;letter-spacing:.08em;text-transform:uppercase;transition:all .3s;position:relative;overflow:hidden}
.upload-cta::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.25),transparent);opacity:0;transition:opacity .3s}
.upload-cta:hover{transform:translateY(-2px);box-shadow:0 12px 35px rgba(0,255,163,.3)}
.upload-cta:hover::after{opacity:1}
input[type=file]{display:none}

/* PREVIEW */
.preview-area{display:none;margin-top:1.4rem}
.preview-area.show{display:block}
.preview-topbar{display:flex;align-items:center;justify-content:space-between;padding:.8rem 1.2rem;background:var(--s2);border:1px solid var(--b2);border-bottom:none}
.preview-fname{font-size:.66rem;color:var(--g);display:flex;align-items:center;gap:.5rem}
.rm-btn{background:none;border:none;color:var(--dim);cursor:pointer;font-family:'DM Sans',sans-serif;font-size:.62rem;letter-spacing:.08em;transition:color .2s}
.rm-btn:hover{color:var(--r)}
.preview-media{border:1px solid var(--b2);background:#000;display:flex;align-items:center;justify-content:center;min-height:80px;overflow:hidden}
.preview-media img,.preview-media video,.preview-media audio{max-width:100%;max-height:340px;object-fit:contain;display:block}
.preview-media audio{width:100%;padding:1.5rem;background:var(--s2)}
/* Audio waveform visual */
.audio-visual{width:100%;padding:2rem;background:var(--s2);display:flex;flex-direction:column;align-items:center;gap:1rem}
.wave-bars{display:flex;align-items:center;gap:3px;height:60px}
.wave-bar{width:3px;background:linear-gradient(180deg,var(--g),var(--b));border-radius:2px;animation:wave 1.2s ease-in-out infinite}
.wave-bar:nth-child(odd){animation-delay:.15s}
.wave-bar:nth-child(3n){animation-delay:.3s}
@keyframes wave{0%,100%{height:8px}50%{height:52px}}
.audio-name{font-size:.7rem;color:var(--lo)}

/* SCAN BUTTON */
.scan-btn{width:100%;margin-top:1.4rem;padding:1.1rem;background:none;border:1px solid rgba(0,255,163,.4);color:var(--g);font-family:'Bebas Neue',sans-serif;font-size:1.35rem;letter-spacing:.3em;cursor:pointer;position:relative;overflow:hidden;transition:all .35s;display:none}
.scan-btn.show{display:block}
.scan-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,255,163,.1),transparent);transition:left .5s}
.scan-btn:hover{background:rgba(0,255,163,.05);box-shadow:0 0 50px rgba(0,255,163,.2);border-color:var(--g)}
.scan-btn:hover::before{left:100%}
.scan-btn:disabled{opacity:.3;cursor:not-allowed}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANALYSIS OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.analysis-box{display:none;margin-top:1.4rem;border:1px solid var(--b2);background:var(--s1);padding:2rem}
.analysis-box.show{display:block}
.an-title{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:.22em;color:var(--g);margin-bottom:1.5rem;display:flex;align-items:center;gap:.7rem}
.an-title::before{content:'';width:9px;height:9px;border-radius:50%;background:var(--g);animation:blink .65s infinite}
.an-steps{display:flex;flex-direction:column;gap:.45rem}
.an-step{display:flex;align-items:center;gap:.8rem;font-size:.68rem;color:var(--dim);opacity:0;transform:translateX(-10px);transition:all .38s;padding:.42rem 0;border-bottom:1px solid transparent}
.an-step.on{opacity:1;transform:none;color:var(--txt);border-bottom-color:var(--b1)}
.an-step.done{opacity:.35;transform:none}
.an-dot{width:5px;height:5px;border-radius:50%;background:var(--b2);min-width:5px;transition:background .3s}
.an-step.on .an-dot{background:var(--g);animation:blink .7s infinite}
.an-step.done .an-dot{background:var(--g);animation:none}
.an-prog{height:2px;background:var(--b1);margin-top:1.5rem;overflow:hidden;border-radius:2px}
.an-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--b),var(--g));transition:width .5s ease;box-shadow:0 0 10px var(--g)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.results-section{display:none;margin-top:1.4rem}
.results-section.show{display:block}

/* VERDICT HERO */
.verdict-hero{border:2px solid var(--vc,var(--b2));padding:0;margin-bottom:1.2rem;position:relative;overflow:hidden;transition:border-color .5s}
.vh-bg{position:absolute;inset:0;background:radial-gradient(ellipse at left top,var(--vg,transparent),transparent 50%);transition:all .5s}
.vh-inner{display:grid;grid-template-columns:1fr auto;gap:2rem;align-items:center;padding:2rem;position:relative;z-index:1}
.vh-left{}
.vh-eyebrow{font-size:.58rem;letter-spacing:.22em;text-transform:uppercase;color:var(--dim);margin-bottom:.4rem}
.vh-verdict{font-family:'Bebas Neue',sans-serif;font-size:clamp(2.5rem,6vw,5rem);letter-spacing:.06em;line-height:.95;margin-bottom:.8rem;transition:color .5s}
.vh-summary{font-size:.8rem;color:var(--lo);line-height:1.8;max-width:480px}
.vh-right{text-align:center;min-width:100px}
.vh-emoji{font-size:5rem;display:block;animation:bounceIn .6s cubic-bezier(.34,1.56,.64,1) both}
@keyframes bounceIn{0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}}
.vh-score-ring{position:relative;width:90px;height:90px;margin:0 auto .5rem}
.score-ring-svg{width:90px;height:90px;transform:rotate(-90deg)}
.score-ring-bg{fill:none;stroke:var(--b1);stroke-width:6}
.score-ring-fill{fill:none;stroke-width:6;stroke-linecap:round;stroke-dasharray:251.2;stroke-dashoffset:251.2;transition:stroke-dashoffset 1.5s cubic-bezier(.4,0,.2,1),stroke .5s}
.score-ring-num{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-family:'Bebas Neue',sans-serif;font-size:1.4rem;letter-spacing:.05em;transition:color .5s}

/* RISK METER */
.risk-meter{background:var(--s1);border:1px solid var(--b2);padding:1.5rem;margin-bottom:1.2rem}
.rm-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
.rm-label{font-size:.62rem;text-transform:uppercase;letter-spacing:.14em;color:var(--dim)}
.rm-pct{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:.05em;transition:color .5s}
.rm-track{height:8px;background:var(--b1);border-radius:4px;overflow:hidden;margin-bottom:.5rem}
.rm-fill{height:100%;width:0%;border-radius:4px;transition:width 1.5s cubic-bezier(.4,0,.2,1);box-shadow:0 0 12px currentColor}
.rm-marks{display:flex;justify-content:space-between;font-size:.53rem;color:var(--dim)}

/* FORENSIC FINDINGS */
.section-title{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:.22em;color:var(--dim);margin-bottom:.9rem;display:flex;align-items:center;gap:.6rem}
.section-title::after{content:'';flex:1;height:1px;background:var(--b1)}
.findings-grid{display:grid;grid-template-columns:1fr 1fr;gap:.7rem;margin-bottom:1.4rem}
@media(max-width:500px){.findings-grid{grid-template-columns:1fr}}
.finding{background:var(--s1);border:1px solid var(--b2);padding:1.3rem;opacity:0;transform:translateY(14px);transition:opacity .45s,transform .45s,border-color .3s;position:relative;overflow:hidden}
.finding.in{opacity:1;transform:none}
.finding:hover{border-color:var(--b2);background:var(--s2)}
.finding::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;transition:background .3s}
.finding.clr::before{background:var(--g)}
.finding.wrn::before{background:var(--a)}
.finding.flg::before{background:var(--r)}
.f-icon{font-size:1.5rem;display:block;margin-bottom:.6rem}
.f-name{font-size:.72rem;font-weight:500;display:block;margin-bottom:.28rem;color:var(--txt)}
.f-detail{font-size:.62rem;color:var(--lo);line-height:1.65;margin-bottom:.6rem}
.f-badge{font-size:.5rem;letter-spacing:.14em;text-transform:uppercase;padding:.14rem .48rem;border:1px solid currentColor;display:inline-block}
.f-badge.clr{color:var(--g)}
.f-badge.wrn{color:var(--a)}
.f-badge.flg{color:var(--r)}

/* AI ANALYSIS */
.ai-analysis{background:var(--s1);border:1px solid var(--b2);padding:1.7rem;margin-bottom:1.2rem}
.ai-head{display:flex;align-items:center;gap:.55rem;font-size:.6rem;letter-spacing:.18em;text-transform:uppercase;color:var(--b);padding-bottom:.9rem;border-bottom:1px solid var(--b1);margin-bottom:1rem}
.ai-head::before{content:'';width:7px;height:7px;border-radius:50%;background:var(--b);animation:blink 2s infinite}
.ai-text{font-size:.78rem;line-height:2;color:var(--txt);opacity:.88;white-space:pre-wrap}

/* SHARE / RESET */
.action-row{display:flex;gap:.7rem;margin-bottom:1.4rem}
.action-btn{flex:1;padding:.85rem;border:1px solid var(--b2);background:none;color:var(--lo);font-family:'DM Sans',sans-serif;font-size:.65rem;cursor:pointer;letter-spacing:.1em;text-transform:uppercase;transition:all .25s}
.action-btn:hover{border-color:var(--b);color:var(--b)}
.action-btn.danger:hover{border-color:var(--r);color:var(--r)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOW IT WORKS SECTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.how-section{border-top:1px solid var(--b1);padding:4rem 3rem;text-align:center;max-width:900px;margin:0 auto}
.section-big-title{font-family:'Bebas Neue',sans-serif;font-size:3rem;letter-spacing:.1em;margin-bottom:.4rem;background:linear-gradient(135deg,#fff,#446);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.section-sub{font-size:.73rem;color:var(--dim);margin-bottom:3rem;letter-spacing:.05em}
.how-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:1.1rem}
@media(max-width:600px){.how-cards{grid-template-columns:1fr}}
.how-card{background:var(--s1);border:1px solid var(--b1);padding:1.8rem 1.4rem;text-align:left;position:relative;transition:all .3s}
.how-card:hover{border-color:var(--b2);transform:translateY(-4px)}
.how-num{font-family:'Bebas Neue',sans-serif;font-size:4rem;color:var(--b1);line-height:1;margin-bottom:.6rem;display:block}
.how-h{font-size:.82rem;font-weight:500;color:var(--txt);margin-bottom:.4rem}
.how-p{font-size:.63rem;color:var(--dim);line-height:1.78}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
footer{border-top:1px solid var(--b1);padding:2rem 3rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
.ft-brand{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:.1em;color:var(--dim)}
.ft-brand span{color:var(--g)}
.ft-note{font-size:.58rem;color:var(--dim);max-width:440px;line-height:1.75}
.ft-hackathon{font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;background:linear-gradient(135deg,var(--g),var(--b));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:500}

@media(max-width:640px){
  nav,footer{padding:1.2rem 1.5rem}
  .hero{padding:3.5rem 1.5rem 2.5rem}
  .mode-grid{grid-template-columns:1fr}
  .mode-wrap,.upload-arena{padding:0 1.2rem 4rem}
  .vh-inner{grid-template-columns:1fr}
  .how-section{padding:3rem 1.5rem}
}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <div class="splash-hex">
    <div class="splash-inner">âš¡</div>
  </div>
  <div class="splash-title">AI TRUTH ENGINE</div>
  <div class="splash-bar"><div class="splash-prog"></div></div>
  <div class="splash-sub">Initializing Forensic Systems...</div>
</div>

<div class="scanline"></div>
<canvas id="bgCanvas"></canvas>

<div class="wrap">

<!-- NAV -->
<nav>
  <div class="nav-brand">
    <div class="nav-hex">âš¡</div>
    <div class="nav-name">AI TRUTH <em>VERIFICATION ENGINE</em></div>
  </div>
  <div class="nav-right">
    <div class="nav-badge">Live Â· Claude AI</div>
    <div class="hackathon-tag">ğŸ† Sinhgad 2026</div>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-chip">âš¡ Powered by Anthropic Claude Â· Forensic Grade Detection</div>
  <div class="hero-big">
    <span class="w1">DETECT</span><br>
    <span class="w2">THE FAKE.</span>
  </div>
  <span class="hero-italic">Know What's Real.</span>
  <p class="hero-desc">Upload any image, video, or audio. Our AI performs deep forensic analysis to detect deepfakes, synthetic media, and manipulation â€” giving you an instant, evidence-based verdict.</p>
  <div class="hero-stats">
    <div class="hstat"><span class="hstat-num" style="color:var(--r)">900%</span><span class="hstat-lbl">Rise in Deepfakes</span></div>
    <div class="hstat"><span class="hstat-num" style="color:var(--a)">68%</span><span class="hstat-lbl">Can't Detect AI Voice</span></div>
    <div class="hstat"><span class="hstat-num" style="color:var(--g)">6Ã—</span><span class="hstat-lbl">Faster Fake Spread</span></div>
    <div class="hstat"><span class="hstat-num" style="color:var(--b)">8</span><span class="hstat-lbl">Forensic Layers</span></div>
  </div>
</section>

<!-- MODE SELECTOR -->
<div class="mode-wrap">
  <div class="mode-grid">
    <div class="mode-card sel" onclick="setMode('image',this)" data-mode="image">
      <div class="mode-sel-dot"></div>
      <span class="mode-icon">ğŸ–¼ï¸</span>
      <div class="mode-name">Image</div>
      <div class="mode-desc">JPG Â· PNG Â· WEBP Â· GIF<br>Detect AI-generated & edited photos</div>
    </div>
    <div class="mode-card" onclick="setMode('video',this)" data-mode="video">
      <div class="mode-sel-dot"></div>
      <span class="mode-icon">ğŸ¬</span>
      <div class="mode-name">Video</div>
      <div class="mode-desc">MP4 Â· MOV Â· WEBM<br>Detect deepfake & manipulated footage</div>
    </div>
    <div class="mode-card" onclick="setMode('audio',this)" data-mode="audio">
      <div class="mode-sel-dot"></div>
      <span class="mode-icon">ğŸ™ï¸</span>
      <div class="mode-name">Audio</div>
      <div class="mode-desc">MP3 Â· WAV Â· OGG Â· M4A<br>Detect AI voice clones & fake speech</div>
    </div>
  </div>
</div>

<!-- UPLOAD ARENA -->
<div class="upload-arena">

  <div class="dropzone" id="dropzone" onclick="triggerFile()">
    <div class="dz-corner tl"></div>
    <div class="dz-corner tr"></div>
    <div class="dz-corner bl"></div>
    <div class="dz-corner br"></div>
    <div class="dz-glow"></div>

    <div class="orb"><div class="orb-icon" id="dzIcon">ğŸ–¼ï¸</div></div>
    <div class="dz-title" id="dzTitle">Drop Your Image Here</div>
    <p class="dz-sub" id="dzSub">Drag & drop any image file â€” or click to browse.<br>Your file is analyzed privately and never stored.</p>

    <div class="fmt-pills" id="fmtPills">
      <span class="fmt-pill active-fmt">JPG</span>
      <span class="fmt-pill active-fmt">PNG</span>
      <span class="fmt-pill active-fmt">WEBP</span>
      <span class="fmt-pill active-fmt">GIF</span>
    </div>

    <button class="upload-cta" onclick="event.stopPropagation();triggerFile()">
      â†‘ &nbsp; Choose File to Analyze
    </button>

    <input type="file" id="fileInput" onchange="handleFile(this.files[0])">
  </div>

  <!-- PREVIEW -->
  <div class="preview-area" id="previewArea">
    <div class="preview-topbar">
      <div class="preview-fname">ğŸ“ <span id="previewName">file</span></div>
      <button class="rm-btn" onclick="resetAll()">âœ• Remove</button>
    </div>
    <div class="preview-media" id="previewMedia"></div>
  </div>

  <!-- SCAN BTN -->
  <button class="scan-btn" id="scanBtn" onclick="runAnalysis()">
    âŸ¶ &nbsp; Run AI Verification &nbsp; âŸµ
  </button>

  <!-- ANALYSIS -->
  <div class="analysis-box" id="analysisBox">
    <div class="an-title">Forensic Analysis In Progress</div>
    <div class="an-steps" id="anSteps"></div>
    <div class="an-prog"><div class="an-fill" id="anFill"></div></div>
  </div>

  <!-- RESULTS -->
  <div class="results-section" id="resultsSection">

    <!-- VERDICT -->
    <div class="verdict-hero" id="verdictHero">
      <div class="vh-bg" id="vhBg"></div>
      <div class="vh-inner">
        <div class="vh-left">
          <div class="vh-eyebrow">AI Forensic Verdict</div>
          <div class="vh-verdict" id="vhVerdict">â€”</div>
          <div class="vh-summary" id="vhSummary"></div>
        </div>
        <div class="vh-right">
          <div class="vh-score-ring">
            <svg class="score-ring-svg" viewBox="0 0 90 90">
              <circle class="score-ring-bg" cx="45" cy="45" r="40"/>
              <circle class="score-ring-fill" id="ringFill" cx="45" cy="45" r="40"/>
            </svg>
            <div class="score-ring-num" id="ringNum">0%</div>
          </div>
          <div style="font-size:.58rem;color:var(--dim);letter-spacing:.1em;text-transform:uppercase">Risk Score</div>
        </div>
      </div>
    </div>

    <!-- RISK METER -->
    <div class="risk-meter">
      <div class="rm-top">
        <div class="rm-label">Manipulation Probability</div>
        <div class="rm-pct" id="rmPct">0%</div>
      </div>
      <div class="rm-track"><div class="rm-fill" id="rmFill"></div></div>
      <div class="rm-marks"><span>0% â€” Authentic</span><span>50% â€” Suspicious</span><span>100% â€” Fake</span></div>
    </div>

    <!-- FINDINGS -->
    <div class="section-title">Forensic Findings</div>
    <div class="findings-grid" id="findingsGrid"></div>

    <!-- AI ANALYSIS -->
    <div class="ai-analysis">
      <div class="ai-head">Detailed AI Analysis Report</div>
      <div class="ai-text" id="aiText"></div>
    </div>

    <div class="action-row">
      <button class="action-btn" onclick="copyReport()">ğŸ“‹ Copy Report</button>
      <button class="action-btn danger" onclick="resetAll()">â†º Analyze Another</button>
    </div>
  </div>

</div><!-- /upload-arena -->

<!-- HOW IT WORKS -->
<div class="how-section">
  <div class="section-big-title">HOW IT WORKS</div>
  <div class="section-sub">Three steps. Seconds. Full forensic certainty.</div>
  <div class="how-cards">
    <div class="how-card">
      <span class="how-num">01</span>
      <div class="how-h">Choose & Upload</div>
      <p class="how-p">Select image, video, or audio mode. Upload any file via drag-and-drop or file picker. Your file is processed entirely in-browser â€” never stored on any server.</p>
    </div>
    <div class="how-card">
      <span class="how-num">02</span>
      <div class="how-h">AI Forensic Scan</div>
      <p class="how-p">Claude AI performs an 8-layer forensic scan: pixel artifacts, facial boundaries, compression signatures, lighting coherence, deepfake neural patterns, and more.</p>
    </div>
    <div class="how-card">
      <span class="how-num">03</span>
      <div class="how-h">Instant Verdict</div>
      <p class="how-p">Receive a full forensic report: AUTHENTIC / SUSPICIOUS / LIKELY FAKE / AI GENERATED, with a 0â€“100% risk score, 4 detailed findings, and a full AI written analysis.</p>
    </div>
  </div>
</div>

<footer>
  <div class="ft-brand">AI TRUTH <span>VERIFICATION ENGINE</span></div>
  <div class="ft-note">âš  AI analysis results are probabilistic assessments, not legal determinations. For critical decisions, consult professional forensic analysts.</div>
  <div class="ft-hackathon">ğŸ† Sinhgad Hackathon 2026 Â· AI/ML Track</div>
</footer>

</div><!-- /wrap -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CANVAS PARTICLE BACKGROUND
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let W, H, particles = [];

function resizeCanvas() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

class Particle {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * W;
    this.y = Math.random() * H;
    this.vx = (Math.random() - .5) * .3;
    this.vy = (Math.random() - .5) * .3;
    this.r = Math.random() * 1.2 + .2;
    this.alpha = Math.random() * .4 + .05;
    this.color = Math.random() > .5 ? '#00FFA3' : '#4F7CFF';
  }
  update() {
    this.x += this.vx; this.y += this.vy;
    if(this.x < 0 || this.x > W || this.y < 0 || this.y > H) this.reset();
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
    ctx.fillStyle = this.color;
    ctx.globalAlpha = this.alpha;
    ctx.fill();
  }
}

for(let i=0;i<120;i++) particles.push(new Particle());

function animCanvas() {
  ctx.clearRect(0,0,W,H);
  // Draw connections
  for(let i=0;i<particles.length;i++){
    for(let j=i+1;j<particles.length;j++){
      const dx=particles[i].x-particles[j].x, dy=particles[i].y-particles[j].y;
      const dist=Math.sqrt(dx*dx+dy*dy);
      if(dist<100){
        ctx.beginPath();
        ctx.moveTo(particles[i].x,particles[i].y);
        ctx.lineTo(particles[j].x,particles[j].y);
        ctx.strokeStyle='#00FFA3';
        ctx.globalAlpha=(1-dist/100)*.05;
        ctx.lineWidth=.5;
        ctx.stroke();
      }
    }
  }
  particles.forEach(p=>{ p.update(); p.draw(); });
  ctx.globalAlpha=1;
  requestAnimationFrame(animCanvas);
}
animCanvas();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SPLASH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
setTimeout(()=>document.getElementById('splash').classList.add('hide'), 2800);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentMode = 'image';
let currentFile = null;
let lastReport = '';

const ACCEPTS = {
  image: 'image/*',
  video: 'video/*',
  audio: 'audio/*,.mp3,.wav,.ogg,.m4a,.aac'
};

const DZ_CONFIG = {
  image: { icon:'ğŸ–¼ï¸', title:'Drop Your Image Here', sub:'Drag & drop any image file â€” or click to browse.\nAnalyzed privately. Never stored.', fmts:['JPG','PNG','WEBP','GIF'] },
  video: { icon:'ğŸ¬', title:'Drop Your Video Here', sub:'Drag & drop any video file â€” or click to browse.\nAnalyzed privately. Never stored.', fmts:['MP4','MOV','WEBM','AVI'] },
  audio: { icon:'ğŸ™ï¸', title:'Drop Your Audio Here', sub:'Drag & drop any audio file â€” or click to browse.\nDetects AI voice clones & synthetic speech.', fmts:['MP3','WAV','OGG','M4A'] }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODE SWITCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setMode(mode, el) {
  currentMode = mode;
  document.querySelectorAll('.mode-card').forEach(c=>c.classList.remove('sel'));
  el.classList.add('sel');
  const cfg = DZ_CONFIG[mode];
  document.getElementById('dzIcon').textContent = cfg.icon;
  document.getElementById('dzTitle').textContent = cfg.title;
  document.getElementById('dzSub').textContent = cfg.sub;
  const pills = document.getElementById('fmtPills');
  pills.innerHTML = cfg.fmts.map(f=>`<span class="fmt-pill active-fmt">${f}</span>`).join('');
  document.getElementById('fileInput').accept = ACCEPTS[mode];
  resetAll();
}

function triggerFile() {
  document.getElementById('fileInput').click();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FILE HANDLING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function handleFile(file) {
  if (!file) return;
  currentFile = file;
  const url = URL.createObjectURL(file);
  document.getElementById('previewName').textContent = file.name;

  const mediaEl = document.getElementById('previewMedia');
  mediaEl.innerHTML = '';

  if (currentMode === 'image') {
    const img = document.createElement('img');
    img.src = url;
    mediaEl.appendChild(img);
  } else if (currentMode === 'video') {
    const vid = document.createElement('video');
    vid.src = url; vid.controls = true;
    mediaEl.appendChild(vid);
  } else {
    // Audio visual
    const div = document.createElement('div');
    div.className = 'audio-visual';
    const wave = document.createElement('div');
    wave.className = 'wave-bars';
    for(let i=0;i<28;i++){
      const b=document.createElement('div');
      b.className='wave-bar';
      b.style.height = (Math.random()*44+8)+'px';
      wave.appendChild(b);
    }
    const aud = document.createElement('audio');
    aud.src = url; aud.controls = true; aud.style.width='100%';
    const nm = document.createElement('div');
    nm.className = 'audio-name';
    nm.textContent = 'ğŸ™ï¸ ' + file.name;
    div.appendChild(nm); div.appendChild(wave); div.appendChild(aud);
    mediaEl.appendChild(div);
  }

  document.getElementById('previewArea').classList.add('show');
  document.getElementById('scanBtn').classList.add('show');
  document.getElementById('resultsSection').classList.remove('show');
  document.getElementById('analysisBox').classList.remove('show');
}

// Drag & drop
const dz = document.getElementById('dropzone');
dz.addEventListener('dragover', e=>{ e.preventDefault(); dz.classList.add('over'); });
dz.addEventListener('dragleave', ()=>dz.classList.remove('over'));
dz.addEventListener('drop', e=>{ e.preventDefault(); dz.classList.remove('over'); const f=e.dataTransfer.files[0]; if(f)handleFile(f); });

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ANALYSIS STEPS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const IMAGE_STEPS = [
  'Initializing forensic scanner...',
  'Extracting pixel-level metadata...',
  'Scanning facial boundary artifacts...',
  'Analyzing compression signatures...',
  'Checking lighting & shadow coherence...',
  'Running deepfake neural pattern match...',
  'Detecting AI-generation fingerprints...',
  'Compiling forensic verdict report...'
];

const VIDEO_STEPS = [
  'Loading video frame analysis...',
  'Scanning temporal consistency...',
  'Detecting face-swap artifacts...',
  'Analyzing motion & lip-sync patterns...',
  'Checking audio-visual sync coherence...',
  'Running deepfake classifier...',
  'Evaluating editing splice signatures...',
  'Generating threat assessment...'
];

const AUDIO_STEPS = [
  'Loading audio waveform data...',
  'Analyzing voice frequency patterns...',
  'Detecting synthetic speech markers...',
  'Scanning for TTS generation artifacts...',
  'Checking prosody & breathing patterns...',
  'Running voice clone classifier...',
  'Cross-referencing acoustic signatures...',
  'Compiling authenticity verdict...'
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROMPTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildPrompt(mode) {
  const base = `You are a world-class forensic AI detection expert specializing in deepfakes, synthetic media, and digital manipulation. Analyze the uploaded ${mode} file with maximum forensic rigor.`;

  const imagePrompt = `${base}

Examine this image for:
1. AI generation artifacts (DALL-E, Midjourney, Stable Diffusion, Firefly signatures)
2. Deepfake or face-swap manipulation (facial boundary blur, texture inconsistencies)
3. Photo editing manipulation (clone stamps, inpainting, compositing)
4. Lighting and shadow incoherence
5. Impossible hand/teeth/hair geometry (AI tells)
6. Text anomalies (garbled letters, inconsistent fonts)
7. Compression artifact patterns inconsistent with camera origins
8. Metadata-visible anomalies

Respond ONLY in this exact JSON format, no other text:
{
  "verdict": "AUTHENTIC" | "SUSPICIOUS" | "LIKELY FAKE" | "AI GENERATED",
  "manipulationScore": <integer 0-100>,
  "summary": "<2-sentence plain English verdict>",
  "findings": [
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"}
  ],
  "detailedAnalysis": "<comprehensive 5-7 sentence forensic paragraph covering all examined dimensions, key findings, confidence level, and recommendations>"
}`;

  const videoPrompt = `${base}

File info: Name="${currentFile?.name}", Size=${Math.round((currentFile?.size||0)/1024)}KB, Type=${currentFile?.type}.

Analyze this video file for deepfake and manipulation indicators:
1. Temporal facial inconsistencies and face-swap artifacts
2. Unnatural blinking patterns and eye movement
3. Lip-sync mismatches with audio
4. Lighting inconsistencies across frames
5. Compression artifacts unusual for natural video
6. Evidence of video splicing or editing
7. Motion blur inconsistencies

Respond ONLY in this exact JSON format:
{
  "verdict": "AUTHENTIC" | "SUSPICIOUS" | "LIKELY FAKE" | "CANNOT DETERMINE",
  "manipulationScore": <integer 0-100>,
  "summary": "<2-sentence plain English verdict>",
  "findings": [
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"}
  ],
  "detailedAnalysis": "<comprehensive 5-7 sentence forensic paragraph. Note: direct video frame analysis is limited in this context; provide evidence-based probabilistic assessment based on file metadata and known manipulation patterns>"
}`;

  const audioPrompt = `${base}

File info: Name="${currentFile?.name}", Size=${Math.round((currentFile?.size||0)/1024)}KB, Type=${currentFile?.type}.

Analyze this audio file for AI voice cloning and synthetic speech indicators:
1. Unnatural prosody and speech rhythm patterns
2. TTS (Text-to-Speech) generation artifacts
3. Missing natural breath sounds and vocal fry
4. Flat emotional modulation typical of AI voices
5. Background noise inconsistencies and audio splicing
6. Frequency patterns consistent with known voice clone models
7. Acoustic signature anomalies

Respond ONLY in this exact JSON format:
{
  "verdict": "AUTHENTIC" | "SUSPICIOUS" | "LIKELY SYNTHETIC" | "AI VOICE CLONE",
  "manipulationScore": <integer 0-100>,
  "summary": "<2-sentence plain English verdict>",
  "findings": [
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"},
    {"icon": "<single emoji>", "name": "<short name>", "detail": "<1-2 sentence explanation>", "status": "CLEAR" | "WARNING" | "FLAGGED"}
  ],
  "detailedAnalysis": "<comprehensive 5-7 sentence forensic paragraph. Note: direct audio waveform analysis is limited in this context; provide evidence-based probabilistic assessment based on file metadata and known synthetic speech patterns>"
}`;

  return mode === 'image' ? imagePrompt : mode === 'video' ? videoPrompt : audioPrompt;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN ANALYSIS FUNCTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function runAnalysis() {
  if (!currentFile) return;

  const btn = document.getElementById('scanBtn');
  btn.disabled = true;

  const steps = currentMode === 'image' ? IMAGE_STEPS : currentMode === 'video' ? VIDEO_STEPS : AUDIO_STEPS;

  // Show analysis box
  const aBox = document.getElementById('analysisBox');
  aBox.classList.add('show');
  document.getElementById('resultsSection').classList.remove('show');

  // Build steps UI
  const stepsEl = document.getElementById('anSteps');
  stepsEl.innerHTML = '';
  const stepEls = steps.map(s => {
    const el = document.createElement('div');
    el.className = 'an-step';
    el.innerHTML = `<div class="an-dot"></div><span>${s}</span>`;
    stepsEl.appendChild(el);
    return el;
  });

  // Animate steps
  let idx = 0;
  const fill = document.getElementById('anFill');
  const timer = setInterval(() => {
    if(idx>0) stepEls[idx-1].classList.replace('on','done');
    if(idx<stepEls.length){
      stepEls[idx].classList.add('on');
      fill.style.width = ((idx+1)/stepEls.length*80)+'%';
      idx++;
    }
  }, 650);

  // Prepare file data
  let base64 = '', mediaType = currentFile.type;
  try {
    const r = new FileReader();
    base64 = await new Promise((res,rej)=>{ r.onload=()=>res(r.result.split(',')[1]); r.onerror=rej; r.readAsDataURL(currentFile); });
  } catch(e) { console.warn('File read:', e); }

  // Build message
  let messageContent;
  if (currentMode === 'image' && base64) {
    const validTypes = ['image/jpeg','image/png','image/gif','image/webp'];
    if (!validTypes.includes(mediaType)) mediaType = 'image/jpeg';
    messageContent = [
      { type:'image', source:{ type:'base64', media_type:mediaType, data:base64 } },
      { type:'text', text:buildPrompt('image') }
    ];
  } else {
    messageContent = [{ type:'text', text:buildPrompt(currentMode) }];
  }

  try {
    const resp = await fetch('https://api.anthropic.com/v1/messages', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        model:'claude-sonnet-4-20250514',
        max_tokens:1000,
        messages:[{ role:'user', content:messageContent }]
      })
    });

    clearInterval(timer);
    stepEls.forEach(e=>{ e.classList.remove('on'); e.classList.add('done'); });
    fill.style.width='100%';
    await sleep(500);

    const data = await resp.json();
    const raw = data.content?.map(c=>c.text||'').join('') || '';

    let result;
    try {
      const clean = raw.replace(/```json|```/g,'').trim();
      const match = clean.match(/\{[\s\S]*\}/);
      result = JSON.parse(match?.[0] || clean);
    } catch {
      result = {
        verdict:'CANNOT DETERMINE',
        manipulationScore:50,
        summary:'Analysis completed. Manual review recommended.',
        findings:[{icon:'ğŸ”',name:'Analysis Complete',detail:raw.slice(0,200),status:'WARNING'}],
        detailedAnalysis:raw
      };
    }

    aBox.classList.remove('show');
    showResults(result);

  } catch(err) {
    clearInterval(timer);
    aBox.classList.remove('show');
    btn.disabled = false;
    showResults({
      verdict:'ERROR',
      manipulationScore:0,
      summary:'Could not connect to AI service. Please try again.',
      findings:[{icon:'âš ï¸',name:'Connection Error',detail:err.message||'Network error.',status:'WARNING'}],
      detailedAnalysis:'The AI analysis service could not be reached. Please check your connection and try again.'
    });
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHOW RESULTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showResults(r) {
  const verdict = r.verdict||'UNKNOWN';
  const score = Math.min(100,Math.max(0,r.manipulationScore||0));

  // Colors
  let color, glow, emoji, ringColor;
  if(verdict==='AUTHENTIC'||verdict==='CLEAR'){
    color='#00FFA3';glow='rgba(0,255,163,0.15)';emoji='âœ…';ringColor='#00FFA3';
  } else if(verdict==='SUSPICIOUS'){
    color='#FFB800';glow='rgba(255,184,0,0.15)';emoji='âš ï¸';ringColor='#FFB800';
  } else if(verdict.includes('FAKE')||verdict.includes('CLONE')||verdict.includes('SYNTHETIC')||verdict.includes('GENERATED')){
    color='#FF3355';glow='rgba(255,51,85,0.15)';emoji='ğŸš¨';ringColor='#FF3355';
  } else if(verdict==='ERROR'){
    color='#3A5470';glow='transparent';emoji='âŒ';ringColor='#3A5470';
  } else {
    color='#4F7CFF';glow='rgba(79,124,255,0.15)';emoji='ğŸ”';ringColor='#4F7CFF';
  }

  // Verdict hero
  const vh = document.getElementById('verdictHero');
  vh.style.setProperty('--vc',color);
  document.getElementById('vhBg').style.background=`radial-gradient(ellipse at left top,${glow},transparent 55%)`;
  document.getElementById('vhVerdict').textContent=verdict;
  document.getElementById('vhVerdict').style.color=color;
  document.getElementById('vhSummary').textContent=r.summary||'';

  // Ring score
  const circumference = 251.2;
  const offset = circumference-(score/100*circumference);
  const ring = document.getElementById('ringFill');
  ring.style.stroke = ringColor;
  ring.style.strokeDasharray = circumference;
  setTimeout(()=>{ ring.style.strokeDashoffset=offset; },100);
  const ringNum = document.getElementById('ringNum');
  ringNum.textContent=score+'%';
  ringNum.style.color=ringColor;

  // Emoji (add to right)
  vh.querySelector('.vh-right').insertAdjacentHTML('afterbegin',`<span class="vh-emoji">${emoji}</span>`);

  // Risk meter
  const scoreColor = score<30?'#00FFA3':score<60?'#FFB800':'#FF3355';
  document.getElementById('rmPct').textContent=score+'%';
  document.getElementById('rmPct').style.color=scoreColor;
  const rmFill = document.getElementById('rmFill');
  rmFill.style.color=scoreColor;
  rmFill.style.background=scoreColor;
  setTimeout(()=>{ rmFill.style.width=score+'%'; },100);

  // Findings
  const fg = document.getElementById('findingsGrid');
  fg.innerHTML='';
  (r.findings||[]).forEach((f,i)=>{
    const st = (f.status||'').toUpperCase();
    const cls = st==='CLEAR'?'clr':st==='FLAGGED'?'flg':'wrn';
    const el = document.createElement('div');
    el.className=`finding ${cls}`;
    el.innerHTML=`<span class="f-icon">${f.icon||'ğŸ”'}</span><span class="f-name">${f.name}</span><div class="f-detail">${f.detail}</div><span class="f-badge ${cls}">${f.status}</span>`;
    fg.appendChild(el);
    setTimeout(()=>el.classList.add('in'),80+i*120);
  });

  // AI text
  document.getElementById('aiText').textContent=r.detailedAnalysis||'';

  // Save for copy
  lastReport = `AI TRUTH VERIFICATION ENGINE â€” FORENSIC REPORT\n${'='.repeat(50)}\nVerdict: ${verdict}\nRisk Score: ${score}%\nSummary: ${r.summary}\n\nDetailed Analysis:\n${r.detailedAnalysis}\n\nFindings:\n${(r.findings||[]).map(f=>`â€¢ ${f.name} [${f.status}]: ${f.detail}`).join('\n')}\n\nâš  Results are AI-generated probabilistic assessments.`;

  // Show
  const rs = document.getElementById('resultsSection');
  rs.classList.add('show');
  rs.scrollIntoView({behavior:'smooth',block:'start'});
  document.getElementById('scanBtn').disabled=false;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function sleep(ms){return new Promise(r=>setTimeout(r,ms))}

function copyReport(){
  navigator.clipboard.writeText(lastReport).then(()=>{
    const btn = event.target;
    const orig=btn.textContent;
    btn.textContent='âœ“ Copied!';
    setTimeout(()=>btn.textContent=orig,2000);
  });
}

function resetAll(){
  currentFile=null;
  document.getElementById('fileInput').value='';
  document.getElementById('previewArea').classList.remove('show');
  document.getElementById('scanBtn').classList.remove('show');
  document.getElementById('analysisBox').classList.remove('show');
  const rs=document.getElementById('resultsSection');
  rs.classList.remove('show');
  document.getElementById('anFill').style.width='0%';
  document.getElementById('scanBtn').disabled=false;
  // Clear emoji duplicate
  const emojiEl=document.querySelector('.vh-emoji');
  if(emojiEl)emojiEl.remove();
  window.scrollTo({top:0,behavior:'smooth'});
}
</script>
</body>
</html>
